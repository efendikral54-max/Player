<!DOCTYPE html>
<html>
<head>
    <title>URL Resolver</title>
    <script>
        // Diese Funktion wird von Kodular aufgerufen
        function resolve(shortUrl) {
            // Wir nutzen einen kostenlosen Proxy, um die CORS-Sperre zu umgehen
            var proxy = "https://api.allorigins.win/get?url=" + encodeURIComponent(shortUrl);
            
            fetch(proxy)
                .then(response => response.json())
                .then(data => {
                    // Die echte URL steckt in 'data.status.url'
                    var longUrl = data.status.url;
                    // Wir schicken die lange URL zurÃ¼ck an die App
                    window.AppInventor.setWebViewString(longUrl);
                })
                .catch(err => window.AppInventor.setWebViewString("error"));
        }
    </script>
</head>
<body></body>
</html>
